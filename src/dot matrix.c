#include "gpio.h"
#include"dotmatrix.h"
void dot_alphabet(const uint_8 a, port n1, port n2)
{
    volatile uint_8 *port_arr[] = { &PORTA,&PORTB,&PORTC,&PORTD,&PORTE };
    volatile uint_8 *tris_arr[] = { &TRISA,&TRISB,&TRISC,&TRISD,&TRISE };

    volatile uint_8 *p1, *p2, *t1, *t2;

    p1 = port_arr[n1];
    p2 = port_arr[n2];
    t1 = tris_arr[n1];
    t2 = tris_arr[n2];

    *t1 = 0x00;   // Columns output
    *t2 = 0x00;   // Rows output

    if(a < 'A' || a > 'Z')   // Safety check
        return;

    uint_8 index = a - 'A';

    const uint_8 alphabet[26][8] =
    {
        {0x00,0x3C,0x66,0x66,0x7E,0x66,0x66,0x66}, // A
        {0x00,0x78,0x48,0x48,0x70,0x48,0x48,0x78}, // B
        {0x00,0x1E,0x20,0x40,0x40,0x40,0x20,0x1E}, // C
        {0x00,0x38,0x24,0x22,0x22,0x24,0x38,0x00}, // D
        {0x00,0x3C,0x20,0x38,0x20,0x20,0x3C,0x00}, // E
        {0x00,0x3C,0x20,0x38,0x20,0x20,0x20,0x00}, // F
        {0x00,0x3E,0x20,0x20,0x2E,0x22,0x3E,0x00}, // G
        {0x00,0x24,0x24,0x3C,0x24,0x24,0x24,0x00}, // H
        {0x00,0x38,0x10,0x10,0x10,0x10,0x38,0x00}, // I
        {0x00,0x1C,0x08,0x08,0x08,0x28,0x38,0x00}, // J
        {0x00,0x24,0x28,0x30,0x28,0x24,0x24,0x00}, // K
        {0x00,0x20,0x20,0x20,0x20,0x20,0x3C,0x00}, // L
        {0x00,0x44,0xAA,0x92,0x82,0x82,0x00,0x00}, // M
        {0x00,0x22,0x32,0x2A,0x26,0x22,0x00,0x00}, // N
        {0x00,0x3C,0x42,0x42,0x42,0x42,0x3C,0x00}, // O
        {0x00,0x38,0x24,0x24,0x38,0x20,0x20,0x00}, // P
        {0x00,0x3C,0x42,0x42,0x46,0x3E,0x01,0x00}, // Q
        {0x00,0x38,0x24,0x24,0x38,0x24,0x24,0x00}, // R
        {0x00,0x3C,0x20,0x3C,0x04,0x04,0x3C,0x00}, // S
        {0x00,0x7C,0x10,0x10,0x10,0x10,0x10,0x00}, // T
        {0x00,0x42,0x42,0x42,0x42,0x24,0x18,0x00}, // U
        {0x00,0x22,0x22,0x22,0x14,0x14,0x08,0x00}, // V
        {0x00,0x82,0x92,0x54,0x54,0x28,0x00,0x00}, // W
        {0x00,0x42,0x24,0x18,0x18,0x24,0x42,0x00}, // X
        {0x00,0x44,0x28,0x10,0x10,0x10,0x10,0x00}, // Y
        {0x00,0x3C,0x04,0x08,0x10,0x20,0x3C,0x00}  // Z
    };

    const uint_8 col[8] =
    {
        0xFE,0xFD,0xFB,0xF7,
        0xEF,0xDF,0xBF,0x7F
    };

    for(uint_8 k = 0; k < 50; k++)
    {
        for(uint_8 i = 0; i < 8; i++)
        {
            *p1 = col[i];              // Column select
            *p2 = alphabet[index][i];  // Row data
            __delay_ms(1);
        }
    }
}
